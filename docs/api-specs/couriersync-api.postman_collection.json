{
  "info": {
    "name": "CourierSync API",
    "description": "Collection for testing CourierSync APIs",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8080",
      "type": "string"
    },
    {
      "key": "authToken",
      "value": "",
      "type": "string"
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{authToken}}",
        "type": "string"
      }
    ]
  },
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Register User",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  "email": "admin@couriersync.com",\n  "password": "SecurePass123!",\n  "firstName": "Admin",\n  "lastName": "User",\n  "phone": "+1234567890",\n  "role": "ADMIN"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "register"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Login",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  "email": "admin@couriersync.com",\n  "password": "SecurePass123!"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "login"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Refresh Token",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  "refreshToken": "your-refresh-token-here"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/refresh",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "refresh"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/auth/logout",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "logout"
              ]
            }
          },
          "response": []
        }
      ],
      "description": "Authentication endpoints"
    },
    {
      "name": "Users",
      "item": [
        {
          "name": "Get All Users",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/users",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "users"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get User by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/users/{{userId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "users",
                "{{userId}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update User",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  "firstName": "Updated",\n  "lastName": "Name",\n  "phone": "+1234567890"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/users/{{userId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "users",
                "{{userId}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Delete User",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/users/{{userId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "users",
                "{{userId}}"
              ]
            }
          },
          "response": []
        }
      ],
      "description": "User management endpoints"
    },
    {
      "name": "Deliveries",
      "item": [
        {
          "name": "Create Delivery",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  "customerName": "Hospital ABC",\n  "pickupAddress": "123 Pickup St, City, State, ZIP",\n  "pickupContactName": "John Doe",\n  "pickupContactPhone": "+1234567890",\n  "dropoffAddress": "456 Delivery Ave, City, State, ZIP",\n  "dropoffContactName": "Jane Smith",\n  "dropoffContactPhone": "+9876543210",\n  "packageDescription": "Medical samples",\n  "priority": "NORMAL",\n  "requestedPickupTime": "2024-01-15T10:00:00Z"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/deliveries",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "deliveries"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get All Deliveries",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/deliveries",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "deliveries"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Delivery by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/deliveries/{{deliveryId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "deliveries",
                "{{deliveryId}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Assign Driver",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  "driverId": "driver-uuid-here"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/deliveries/{{deliveryId}}/assign",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "deliveries",
                "{{deliveryId}}",
                "assign"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Delivery Status",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  "status": "PICKED_UP",\n  "notes": "Package picked up successfully"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/deliveries/{{deliveryId}}/status",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "deliveries",
                "{{deliveryId}}",
                "status"
              ]
            }
          },
          "response": []
        }
      ],
      "description": "Delivery management endpoints"
    },
    {
      "name": "Tracking",
      "item": [
        {
          "name": "Update Location",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  "driverId": "driver-uuid-here",\n  "deliveryId": "delivery-uuid-here",\n  "latitude": 40.7128,\n  "longitude": -74.0060,\n  "accuracy": 10.5,\n  "speed": 35.0,\n  "heading": 180.0,\n  "timestamp": "2024-01-15T10:30:00Z",\n  "batteryLevel": 85\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/tracking/location",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "tracking",
                "location"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Delivery Tracking",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/tracking/deliveries/{{deliveryId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "tracking",
                "deliveries",
                "{{deliveryId}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Driver Location",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/tracking/drivers/{{driverId}}/location",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "tracking",
                "drivers",
                "{{driverId}}",
                "location"
              ]
            }
          },
          "response": []
        }
      ],
      "description": "Tracking endpoints"
    },
    {
      "name": "Billing",
      "item": [
        {
          "name": "Generate Invoice",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  "deliveryId": "delivery-uuid-here",\n  "baseAmount": 25.00,\n  "distanceAmount": 15.50,\n  "prioritySurcharge": 5.00,\n  "taxAmount": 4.55,\n  "totalAmount": 50.05,\n  "issueDate": "2024-01-15",\n  "dueDate": "2024-02-15"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/invoices",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "invoices"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get All Invoices",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/invoices",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "invoices"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Invoice by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/invoices/{{invoiceId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "invoices",
                "{{invoiceId}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Process Payment",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  "invoiceId": "invoice-uuid-here",\n  "amount": 50.05,\n  "paymentMethod": "CREDIT_CARD",\n  "transactionId": "txn_1234567890",\n  "paymentDate": "2024-01-20T14:30:00Z"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/payments",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "payments"
              ]
            }
          },
          "response": []
        }
      ],
      "description": "Billing and payment endpoints"
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          ""
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "if (pm.response.code === 200 && pm.response.headers.get('Authorization')) {",
          "    pm.collectionVariables.set('authToken', pm.response.headers.get('Authorization').replace('Bearer ', ''));",
          "}"
        ]
      }
    }
  ]
}